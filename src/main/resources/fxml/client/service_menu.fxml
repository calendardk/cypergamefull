<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import java.net.URL?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.cybergame.ui.fxcontroller.ServiceMenuController"
            style="-fx-background-color: #0f172a; -fx-border-color: #334155; -fx-border-width: 2; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.5), 10, 0, 0, 5);">

    <stylesheets>
        <URL value="@../../css/base.css"/>
        <URL value="@../../css/client.css"/>
    </stylesheets>

    <top>
        <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-padding: 15; -fx-background-color: rgba(30, 41, 59, 0.9);">
            <Label text="ðŸŸ Dá»ŠCH Vá»¤ &amp; Äá»’ Ä‚N" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: white;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="ðŸ”„ LÃ m má»›i" onAction="#refreshHistory" 
                    style="-fx-background-color: #475569; -fx-text-fill: white; -fx-cursor: hand;"/>
        </HBox>
    </top>

    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE" styleClass="service-tabs">
            
            <Tab text="ðŸ´ THá»°C ÄÆ N">
                <BorderPane style="-fx-background-color: transparent;">
                    
                    <center>
                        <VBox spacing="10" style="-fx-padding: 10;">
                            <HBox alignment="CENTER_RIGHT">
                                <ComboBox fx:id="cbCategory" promptText="Danh má»¥c" style="-fx-pref-width: 150;"/>
                            </HBox>
                            <ScrollPane fitToWidth="true" style="-fx-background: transparent; -fx-background-color: transparent;" VBox.vgrow="ALWAYS">
                                <content>
                                    <FlowPane fx:id="pnlItems" hgap="15" vgap="15" style="-fx-padding: 10; -fx-background-color: transparent;"/>
                                </content>
                            </ScrollPane>
                        </VBox>
                    </center>

                    <right>
                        <VBox prefWidth="320" spacing="10" style="-fx-background-color: #1e293b; -fx-padding: 15; -fx-border-color: #334155; -fx-border-width: 0 0 0 1;">
                            <Label text="GIá»Ž HÃ€NG" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #38bdf8;"/>
                            
                            <TableView fx:id="tblCart" VBox.vgrow="ALWAYS" styleClass="table-view">
                                <columns>
                                    <TableColumn fx:id="colName" text="TÃªn mÃ³n" prefWidth="120"/>
                                    <TableColumn fx:id="colQty" text="SL" prefWidth="50" style="-fx-alignment: CENTER;"/>
                                    <TableColumn fx:id="colPrice" text="ThÃ nh tiá»n" prefWidth="100" style="-fx-alignment: CENTER-RIGHT;"/>
                                </columns>
                                <columnResizePolicy>
                                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                                </columnResizePolicy>
                            </TableView>
                            
                            <HBox spacing="10">
                                <Button text="âž–" onAction="#decreaseQty" style="-fx-background-color: #475569; -fx-text-fill: white;"/>
                                <Button text="âž•" onAction="#increaseQty" style="-fx-background-color: #475569; -fx-text-fill: white;"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Button text="âŒ XÃ³a" onAction="#removeItem" style="-fx-background-color: #ef4444; -fx-text-fill: white;"/>
                            </HBox>
                            
                            <Separator style="-fx-background-color: #475569;"/>
                            
                            <HBox>
                                <Label text="Tá»•ng cá»™ng:" style="-fx-text-fill: white; -fx-font-size: 14px;"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Label fx:id="lblTotal" text="0 Ä‘" style="-fx-text-fill: #4ade80; -fx-font-weight: bold; -fx-font-size: 16px;"/>
                            </HBox>
                            
                            <Button text="XÃC NHáº¬N Äáº¶T HÃ€NG" onAction="#handleOrder"
                                    maxWidth="Infinity"
                                    style="-fx-background-color: #2563eb; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px; -fx-padding: 10; -fx-cursor: hand;"/>
                        </VBox>
                    </right>
                </BorderPane>
            </Tab>

            <Tab text="ðŸ“‹ ÄÆ N ÄÃƒ Gá»ŒI">
                <VBox style="-fx-padding: 20; -fx-background-color: #0f172a;" spacing="15">
                    <Label text="DANH SÃCH MÃ“N ÄANG CHá»œ &amp; ÄÃƒ PHá»¤C Vá»¤" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 16px;"/>
                    
                    <TableView fx:id="tblHistory" VBox.vgrow="ALWAYS" styleClass="table-view">
                        <columns>
                            <TableColumn fx:id="colHistName" text="TÃªn mÃ³n" prefWidth="200"/>
                            <TableColumn fx:id="colHistQty" text="Sá»‘ lÆ°á»£ng" prefWidth="80" style="-fx-alignment: CENTER;"/>
                            <TableColumn fx:id="colHistTotal" text="Tá»•ng tiá»n" prefWidth="120" style="-fx-alignment: CENTER-RIGHT; -fx-text-fill: #4ade80;"/>
                            <TableColumn fx:id="colHistStatus" text="Tráº¡ng thÃ¡i" prefWidth="120" style="-fx-alignment: CENTER; -fx-font-weight: bold;"/>
                            
                            <TableColumn fx:id="colHistAction" text="HÃ nh Ä‘á»™ng" prefWidth="120" style="-fx-alignment: CENTER;"/>
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                        </columnResizePolicy>
                    </TableView>
                </VBox>
            </Tab>

        </TabPane>
    </center>

</BorderPane>